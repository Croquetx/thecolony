/*  #define IBM_dodrawchar  */
/*                       */
/*----------------------------------*
 * The Colony
 * Copyright 1988 by David A. Smith
 * All Rights Reserved
 * David A. Smith
 * 111 Gold Meadow Dr.
 * Cary, NC 27513
 * (919) 469-8485
 *----------------------------------*/
/*----------------------------------------------------------------------
 *	chars.c
 *----------------------------------------------------------------------
 *	
 * dodrawchar(cnum,ldata,rdata)
 * 		char cnum;
 *		int ldata[2],rdata[2];
 *
 *	Contains a function that draws characters on the walls and the data
 *	structure that defines these characters.
 * 	The structure of a character is as follows:
 *	wallchar[chnum][0]=number of polygons that make up this character.
 *	wallchar[chnum][1]=len1 = length of first polygon
 *	wallchar[chnum][2]=x index 0
 *	wallchar[chnum][3]=y index 0
 *	wallchar[chnum][4]=x index 1
 *	wallchar[chnum][5]=y index 1
 *	....
 *	wallchar[chnum][2+len1*2]=x index len
 *	wallchar[chnum][2+len1*2+1]=y index len
 *	wallchar[chnum][2+len1*2+2]=len2=length of second polygon
 *	....
 *---------------------------------------------------------------------- 
 */
#define EXT extern
#include "gamedefs.h"
/*-----------------------------------------------------------------------*/
char wallchar[70][75]={
/*0x20 = blank*/
	{0},
/*0x21 = '!'*/
	{2,	8,2,0,3,0,3,1,2,1,
		8,2,2,3,2,3,6,2,6},
/*0x22 = '"'*/
	{2,	8,1,4,2,4,2,5,1,5,
		8,3,4,4,4,4,5,3,5},
/*0x23 = '#'*/
	{4,	8,1,0,2,0,2,5,1,5,
		8,3,0,4,0,4,5,3,5,
		8,0,1,5,1,5,2,0,2,
		8,0,3,5,3,5,4,0,4},
/*0x24 = '$'*/
	{2,	8,2,0,3,0,3,6,2,6,
		40,	0,2,0,1,1,0,4,0,5,1,5,2,1,4,1,5,4,5,4,4,
		5,4,5,5,4,6,1,6,0,5,0,4,4,2,4,1,1,1,1,2},
/*0x25 = '%'*/
	{3,	8,1,0,6,5,5,6,0,1,
		26,1,3,2,3,3,4,3,5,2,6,1,6,0,5,0,4,1,3,1,5,2,5,2,4,1,4,
		26,4,0,5,0,6,1,6,2,5,3,4,3,3,2,3,1,4,0,4,2,5,2,5,1,4,1},
/*0x26 = '&'*/
	{3,	8,5,1,5,2,3,4,2,4,
		12,2,4,1,5,2,6,1,6,0,5,1,4,
		26,5,4,3,1,1,1,1,3,3,5,2,6,1,6,2,5,0,3,0,1,1,0,3,0,5,3},
/*0x27 = '''*/
	{1,	8,2,4,3,5,3,6,2,6},
/*0x28 = '('*/
	{1,	12,4,0,3,2,3,4,4,6,2,4,2,2},
/*0x29 = ')'*/
	{1,	12,2,0,4,2,4,4,2,6,3,4,3,2},
/*0x2A = '*'*/
	{6,	6,1,0,3,3,0,2,
		6,2,0,4,0,3,3,
		6,5,0,6,2,3,3,
		6,6,4,5,6,3,3,
		6,2,6,4,6,3,3,
		6,0,4,1,6,3,3},
/*0x2B = '+'*/
	{2,	8,2,0,3,0,3,5,2,5,
		8,0,2,5,2,5,3,0,3},
/*0x2C = ','*/
	{1, 8,2,0,3,1,3,2,2,2},
/*0x2D = '-'*/
	{1,	8,0,2,5,2,5,3,0,3},
/*0x2E = '.'*/
	{1,	8,2,0,3,0,3,1,2,1},
/*0x2F = '/'*/
	{1, 8,1,0,6,5,5,6,0,1},
/*0x30 = '0'*/
	{2,	26,1,0,5,0,6,1,6,5,5,6,1,6,0,5,0,1,1,0,1,5,5,5,5,1,1,1,
		8,1,1,2,1,5,5,4,5},
/*0x31 = '1'*/
	{1,	22,1,0,4,0,4,1,3,1,3,6,2,6,1,5,1,4,2,4,2,1,1,1},
/*0x32 = '2'*/
	{1,	34,	6,0,6,1,2,1,5,2,6,3,
			6,5,5,6,1,6,0,5,0,4,
			1,4,1,5,5,5,5,4,1,2,
			0,1,0,0},
/*0x33 = '3'*/
	{1,	44,	0,2,0,1,1,0,5,0,6,1,
			6,2,5,3,6,4,6,5,5,6,
			1,6,0,5,0,4,1,4,1,5,
			5,5,5,4,4,3,5,2,5,1,
			1,1,1,2},
/*0x34 = '4'*/
	{1,	30,	4,0,5,0,5,2,6,2,6,3,
			5,3,5,6,4,6,4,3,1,3,
			2,6,1,6,0,3,0,2,4,2},
/*0x35 = '5'*/
	{1,	36,	0,2,0,1,1,0,5,0,6,1,
			6,3,5,4,1,4,2,5,6,5,
			6,6,1,6,0,4,0,3,5,3,
			5,1,1,1,1,2},
/*0x36 = '6'*/
	{1,	38,	1,2,5,2,5,1,1,1,1,5,
			5,5,5,4,6,4,6,5,5,6,
			1,6,0,5,0,1,1,0,5,0,
			6,1,6,2,5,3,1,3},
/*0x37 = '7'*/
	{1,	16,	2,0,3,0,3,3,6,6,0,6,
			0,5,4,5,2,3},
/*0x38 = '8'*/
	{2,	32,	3,0,3,1,1,1,1,2,4,3,
			1,4,1,5,3,5,3,6,1,6,
			0,5,0,4,1,3,0,2,0,1,
			1,0,
		32,	3,0,5,0,6,1,6,2,5,3,
			6,4,6,5,5,6,3,6,3,5,
			5,5,5,4,2,3,5,2,5,1,
			3,1},
/*0x39 = '9'*/
	{1,	38,	0,2,0,1,1,0,5,0,6,1,6,5,5,6,1,6,0,5,0,4,
			1,3,5,3,5,4,1,4,1,5,5,5,5,1,1,1,1,2},
/*0x3A = ':'*/
	{2,	8,	2,1,3,1,3,2,2,2,
		8,	2,3,3,3,3,4,2,4},
/*0x3B = ';'*/
	{2,	8,	2,0,3,1,3,2,2,2,
		8,	2,3,3,3,3,4,2,4},
/*0x3C = '<'*/
	{1, 12,	6,0,6,1,2,3,6,5,6,6,0,3},
/*0x3D = '='*/
	{2,	8, 	0,1,5,1,5,2,0,2,
		8,	0,3,5,3,5,4,0,4},
/*0x3E = '>'*/
	{1,	12,	0,0,6,3,0,6,0,5,4,3,0,1},
/*0x3F = '?'*/
	{2,	8,	2,0,3,0,3,1,2,1,
		24,	2,2,3,2,5,4,5,5,4,6,
			1,6,0,5,0,4,1,4,1,5,
			4,5,4,4},
/*0x40 = '@'*/
	{5,	10,	4,0,1,1,0,4,0,1,1,0,
		10,	2,0,5,0,6,1,6,4,5,1,
		10,	6,2,6,5,5,6,2,6,5,5,
		10,	4,6,1,6,0,5,0,2,1,5,
		28,	5,1,5,2,3,5,2,5,1,4,
			1,2,2,1,3,1,5,4,5,5,
			3,2,2,2,2,4,3,4},
/*0x41 = 'A'*/
	{1,	28,	3,6,4,6,6,0,5,0,4,2,
			2,2,1,0,0,0,2,6,3,6,
			3,5,2,3,4,3,3,5},
/*0x42 = 'B'*/
	{1,	40,	0,0,0,6,5,6,6,5,6,4,
			5,3,6,2,6,1,5,0,1,0,
			1,1,5,1,5,2,4,3,1,3,
			1,4,5,4,5,5,1,5,1,0},
/*0x43 = 'C'*/
	{1,	32,	6,2,6,1,5,0,1,0,0,1,
			0,5,1,6,5,6,6,5,6,4,
			5,4,5,5,1,5,1,1,5,1,
			5,2},
/*0x44 = 'D'*/
	{1,	28,	0,0,0,6,4,6,6,4,6,2,
			4,0,1,0,1,1,4,1,5,2,
			5,4,4,5,1,5,1,0},
/*0x45 = 'E'*/
	{1,	24,	0,0,0,6,6,6,6,5,1,5,
			1,4,4,4,4,3,1,3,1,1,
			6,1,6,0},
/*0x46 = 'F'*/
	{1,	20,	0,0,0,6,6,6,6,5,1,5,
			1,3,4,3,4,2,1,2,1,0},
/*0x47 = 'G'*/
	{1,	36,	3,3,6,3,6,1,5,0,1,0,
			0,1,0,5,1,6,5,6,6,5,
			6,4,5,4,5,5,1,5,1,1,
			5,1,5,2,3,2},
/*0x48 = 'H'*/
	{1,	24,	0,0,0,6,1,6,1,4,5,4,
			5,6,6,6,6,0,5,0,5,3,
			1,3,1,0},
/*0x49 = 'I'*/
	{1,	24,	1,0,1,1,2,1,2,5,1,5,
			1,6,4,6,4,5,3,5,3,1,
			4,1,4,0},
/*0x4A = 'J'*/
	{1,	28,	0,2,0,1,1,0,4,0,5,1,
			5,5,6,5,6,6,3,6,3,5,
			4,5,4,1,1,1,1,2},
/*0x4B = 'K'*/
	{1,	22,	0,0,0,6,1,6,1,4,4,6,
			6,6,2,3,6,0,4,0,1,2,
			1,0},
/*0x4C = 'L'*/
	{1,	12,	0,6,0,0,6,0,6,1,1,1,
			1,6},
/*0x4D = 'M'*/
	{1,	24,	0,0,0,6,1,6,3,4,5,6,
			6,6,6,0,5,0,5,4,3,3,
			1,4,1,0},
/*0x4E = 'N'*/
	{1,	20,	0,0,0,6,2,6,5,1,5,6,
			6,6,6,0,4,0,1,5,1,0},
/*0x4F = 'O'*/
	{1,	26,	0,1,0,5,1,6,5,6,6,5,
			6,1,5,0,1,0,0,1,5,1,
			5,5,1,5,1,1},
/*0x50 = 'P'*/
	{1,	24,	0,0,0,6,5,6,6,5,6,3,
			5,2,1,2,1,3,5,3,5,5,
			1,5,1,0},
/*0x51 = 'Q'*/
	{2,	30,	4,0,1,0,0,1,0,5,1,6,
			5,6,6,5,6,2,4,0,4,2,
			5,2,5,5,1,5,1,1,4,1,
		12,	6,0,6,1,5,2,4,2,4,1,
			5,0},
/*0x52 = 'R'*/
	{1,	30,	0,0,0,6,5,6,6,5,6,3,
			5,2,6,0,5,0,4,2,1,2,
			1,3,5,3,5,5,1,5,1,0},
/*0x53 = 'S'*/
	{1,	44,	0,2,0,1,1,0,5,0,6,1,
			6,2,5,3,1,4,1,5,5,5,
			5,4,6,4,6,5,5,6,1,6,
			0,5,0,4,1,3,5,2,5,1,
			1,1,1,2},
/*0x54 = 'T'*/
	{1,	16,	2,0,2,5,0,5,0,6,5,6,
		5,5,3,5,3,0},
/*0x55 = 'U'*/
	{1,	20,	0,6,0,1,1,0,5,0,6,1,
			6,6,5,6,5,1,1,1,1,6},
/*0x56 = 'V'*/
	{1,	14,	0,6,2,0,4,0,6,6,5,6,
			3,1,1,6},
/*0x57 = 'W'*/
	{1,	24,	0,6,1,0,2,0,3,2,4,0,
			5,0,6,6,5,6,4,2,3,4,
			2,2,1,6},
/*0x58 = 'X'*/
	{1,	24,	0,0,2,3,0,6,1,6,3,4,
			5,6,6,6,4,3,6,0,5,0,
			3,2,1,0},
/*0x59 = 'Y'*/
	{2,	12,	0,6,2,3,2,0,3,0,3,3,
			1,6,
		8,	2,3,3,3,5,6,4,6},
/*0x5A = 'Z'*/
	{1,	20,	0,5,4,5,0,1,0,0,6,0,
			6,1,2,1,6,5,6,6,0,6},
/*0x5B = '['*/
	{1,	16,	4,0,2,0,2,6,4,6,4,5,
			3,5,3,1,4,1},
/*0x5C = '\'*/
	{1,	8,	0,5,5,0,6,1,1,6},
/*0x5D = ']'*/
	{1,	16,	2,0,2,1,3,1,3,5,2,5,
		2,6,4,6,4,0},
/*0x5E = '^'*/
	{1,	12,	0,2,3,6,6,2,5,2,3,5,
			1,2},
/*0x5F = '_'*/
	{1,	8,	0,1,6,1,6,2,0,2},
/*0x60 = '`'*/
	{1,	8,2,4,3,5,3,6,2,6},
/*0x61 = Apple (really 'a')*/
	{4,	6,3,4,3,5,4,6,
		20,0,2,0,4,1,5,2,5,3,4,4,5,5,5,6,4,5,4,4,2,
		10,0,2,4,2,4,1,2,0,1,0,
		12,2,1,4,4,5,2,6,2,5,0,4,0},
/*0x62 = right arrow (really 'b')*/
	{1,	14,0,3,3,0,3,2,6,2,6,4,3,4,3,6},
/*0x63 = left arrow (really 'c')*/
	{1,	14,0,2,0,4,3,4,3,6,6,3,3,0,3,2},
/*0x64 = delta (really 'd')*/
	{1,	6,0,0,3,6,6,0},
/*0x65 = radiation symbol (really 'e')*/
	{3, 6,1,0,5,0,3,3,
		6,3,3,0,3,1,6,
		6,3,3,6,3,5,6}

};
/*-----------------------------------------------------------------------*/
dodrawchar(cnum,ldata,rdata)
char cnum;
int ldata[2],rdata[2];
{
#if !defined(IBM_dodrawchar)
int lr[7];
int l_ud[7],r_ud[7];
int ud[7][7];
int i,j,k;
int left_x,left_y,right_x,right_y;
char *ch;
char cnt;
int x[64],y[64];
int index;

cnum -= 0x20;
if(cnum<0)cnum=10;
if(cnum>(0x65-0x20))cnum=10;

ch=wallchar[cnum];
if(rdata[0]<ldata[0])
	{
	right_x=ldata[0];
	left_x=rdata[0];
	right_y=ldata[1];
	left_y=rdata[1];
	}
else
	{
	left_x=ldata[0];
	right_x=rdata[0];
	left_y=ldata[1];
	right_y=rdata[1];
	}
split7(lr,left_x,right_x);
split7(l_ud,Height-left_y,left_y);
split7(r_ud,Height-right_y,right_y);
for(i=0;i<7;i++)split7(ud[i],l_ud[i],r_ud[i]);

cnt=2;
if(polyfill)
	{
	for(k=0;k<ch[0];k++)
		{
		index=0;
		for(i=0;i<(ch[cnt-1]);i+=2)
			{
			x[index]=lr[ch[i+cnt]];
			y[index]=ud[ch[i+cnt+1]][ch[i+cnt]];
			index++;
			}
		SuperPoly(level,index,x,y);
		cnt+=(ch[cnt-1]+1);
		}
	}
else
	{
	PenColor(realcolor[level-1]);
	for(k=0;k<ch[0];k++)
		{
		index=0;
		MoveTo(lr[ch[cnt]],ud[ch[cnt+1]][ch[cnt]]);
		for(i=2;i<(ch[cnt-1]);i+=2)
			LineTo(lr[ch[i+cnt]],ud[ch[i+cnt+1]][ch[i+cnt]]);
		LineTo(lr[ch[cnt]],ud[ch[cnt+1]][ch[cnt]]);
		cnt+=(ch[cnt-1]+1);
		}
	}
PenColor(realcolor[vBLACK]);
#endif
}
