/*--------------------------------- * The Animator * Copyright 1988 by David A. Smith * All Rights Reserved * 111 Gold Meadow Dr. * Cary, NC 27513 *---------------------------------*//*---------------------------------------------------------------------- *	main.c * * 	Functions to create and edit animated displays used by THE GAME. *	Copyright 1985 by David A. Smith *---------------------------------------------------------------------- */#define EXT#include "adefs.h"/*----------------------------------------------------------------------*/main(){GrafPtr saveport;long gr;int i,j;int gne;int windowpart;int arrow;inits();while(doneflag==FALSE)	{	SystemTask();	gne=GetNextEvent(everyEvent,&key);	windowpart=FindWindow( key.where, &whichWindow );	if(gne)		switch(key.what)			{			case mouseDown:				switch(windowpart)					{						case inMenuBar:						DoMenu(MenuSelect(&key.where));						break;					case inSysWindow:						SystemClick(&key,whichWindow);						break;					case inDrag:						DragWindow(whichWindow,key.where,&bounds);						break;					case inGrow:						if(whichWindow==sWindow)DoGrowThing(key.where);						break;					case inContent:									if (whichWindow != FrontWindow())							SelectWindow(whichWindow);						else if(whichWindow==theWindow)DejaVu();						else if(whichWindow==animWindow)DoAnimate();						else if(whichWindow==bgWindow)DoBackGround();						else if(whichWindow==sWindow)DoSprite();						break;					case inGoAway:						if(TrackGoAway(theWindow,key.where))							HideWindow(theWindow);						break;					}				break;			case keyDown:			case autoKey:				keyprocess();				break;			case activateEvt:				/*doactivate(key.modifiers);*/				break;			case updateEvt:				if((WindowPtr)key.message==theWindow)doupdate();				else if((WindowPtr)key.message==bgWindow)BGUpdate();				else if((WindowPtr)key.message==sWindow)SUpdate();				else if((WindowPtr)key.message==animWindow)animUpdate();				break;			}	if(cnum==7)if(FrontWindow()==theWindow)ShowIt();	if(whichWindow!=theWindow)		{		if(!arrow)			{			SetCursor(*(Curs[0]));			arrow=TRUE;			}		}	else 		{		if(arrow)			{			SetCursor(*(Curs[cnum]));			arrow=FALSE;			}		}	}}/*----------------------------------------------------------------------*/keyprocess(){if(key.modifiers & cmdKey)	DoMenu(MenuKey(key.message));}/*----------------------------------------------------------------------*/restart(){ExitToShell();}